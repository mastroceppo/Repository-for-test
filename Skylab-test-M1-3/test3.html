<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Test 3 - Le News</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<style>
.fw-light {
    font-weight: 300 !important;
}
body{padding: 30px 0!important;}
</style>
</head>
<body>
<div class="container" id="news-container"></div>
<div class="text-center">
  <button class="btn btn-primary" id="load-more">Load News</button>
</div>
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
        crossorigin="anonymous"></script>
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"
        integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ=="
        crossorigin="anonymous"></script> -->
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        crossorigin="anonymous"></script>
<script>
	//problema cross-origin
    /*axios.get('news.json').then(function (response) {
        let data = response.data;
        loadNews(data);
    })*/

    let data = {

        "currentPage": 1,
        "totalPage": 5,
        "news": [
            {
                "source": {
                    "id": "1",
                    "name": "CleanTechnica"
                },
                "author": "Tim Dixon",
                "title": "China × Cleantech — January 2021",
                "description": "Welcome to China × Cleantech — January 2021 edition. Our China x Cleantech series covers top cleantech stories in China each month. Happy 牛 Year! I hope your Spring festival went well, Happy 牛 (NIU) Year. EV Sales China — 9.4% Plugin Vehicle Share In Another …",
                "url": "https://cleantechnica.com/2021/02/28/chinaxcleantechjanuary2021/",
                "urlToImage": "https://cleantechnica.com/files/2019/02/ChinaxCleantech_red_new_map1.jpg",
                "publishedAt": "20210228T06:31:53Z",
                "content": "Welcome to China × Cleantech January 2021 edition. Our China x Cleantech series covers top cleantech stories in China each month.\r\nHappy Year!\r\nI hope your Spring festival went well, Happy (NIU) Year… [+10188 chars]"
            },
            {
                "source": {
                    "id": "2",
                    "name": "The Hindu"
                },
                "author": "Reuters",
                "title": "Meet Hayley Arceneaux, first person to go into space with a prosthesis",
                "description": "SpaceX is targeting the fourperson mission for the fourth quarter of 2021",
                "url": "https://www.thehindu.com/scitech/meethayleyarceneauxfirstpersontogointospacewithaprosthesis/article33953857.ece",
                "urlToImage": "https://www.thehindu.com/scitech/96fj10/article33953856.ece/ALTERNATES/LANDSCAPE_615/20210225T200526Z761426494RC2WZL92S1BFRTRMADP3SPACEEXPLORATIONINSPIRATIO",
                "publishedAt": "20210228T06:13:12Z",
                "content": "Bone cancer survivor Hayley Arceneaux is thrilled to be going into space. As a crew member on SpaceX's Inspiration4, the world's first allcommercial astronaut mission to Earth's orbit, Arceneaux hop… [+1862 chars]"
            },
            {
                "source": {
                    "id": "3",
                    "name": "The Times of India"
                },
                "author": "Bloomberg",
                "title": "Why Warren Buffett won’t take the Reddit bait",
                "description": "The biggest omission from Buffett’s letter was any rumination on markets and valuations, nor were there signs that maybe he’d come to accept higher prices as the new normal.",
                "url": "https://economictimes.indiatimes.com/markets/stocks/news/thisonetoowarrenbuffettwonttaketheredditbaittaralachapelle/articleshow/81253577.cms",
                "urlToImage": "https://img.etimg.com/thumb/msid81253728,width1070,height580,imgsize432122,overlayetmarkets/photo.jpg",
                "publishedAt": "20210228T04:54:47Z",
                "content": "By Tara LachapelleAll thats required is the passage of time, an inner calm, began a sentence in Warren Buffetts annual letter to his followers Saturday. He was talking about the essentials of investi… [+6387 chars]"
            },
            {
                "source": {
                    "id": "4",
                    "name": "CleanTechnica"
                },
                "author": "Winter Wilson",
                "title": "How NVIDIA Brings Autonomy To Automakers",
                "description": "In this episode of our CleanTech Talk podcast interview series, Zachary Shahan, Director and CEO of CleanTechnica, and Danny Shapiro, Senior Director of Automotive at NVIDIA, sit down to talk about autonomous vehicles. You can listen to the full conversation …",
                "url": "https://cleantechnica.com/2021/02/27/hownvidiabringsautonomytoautomakers/",
                "urlToImage": "https://cleantechnica.com/files/2021/02/NVIDIADRIVEe1614488544701.png",
                "publishedAt": "20210228T04:47:05Z",
                "content": "In this episode of our CleanTech Talk podcast interview series, Zachary Shahan, Director and CEO of CleanTechnica, and Danny Shapiro, Senior Director of Automotive at NVIDIA, sit down to talk about a… [+3578 chars]"
            },
            {
                "source": {
                    "id": "5",
                    "name": "Post Magazine"
                },
                "author": "Resty Woro Yuniar, Resty Woro Yuniar",
                "title": "Indonesia woos Tesla, Chinese and South Korean firms, in bid for electric vehicle battery crown",
                "description": "As momentum grows for the adoption of electric vehicles in Asia, Indonesia is hoping to become a key part of the supply chain by becoming a major producer of lithiumion batteries.Southeast Asia’s largest economy owns onequarter of the world’s reserves of ni…",
                "url": "https://www.scmp.com/weekasia/economics/article/3123324/indonesiawoosteslachineseandsouthkoreanfirmsbid",
                "urlToImage": "https://cdn.iscmp.com/sites/default/files/styles/og_image_scmp_generic/public/d8/images/methode/2021/02/27/ab5c6ffa781911eb8b9d76c80a88a6d4_image_hires_160209.jpeg?itok=MeHrQY_u&v=1614412937",
                "publishedAt": "20210228T04:30:18Z",
                "content": "Published: 12:30pm, 28 Feb, 2021\r\nUpdated: 12:30pm, 28 Feb, 2021"
            }
        ]
    }

    function loadNews(data) {
        if(data.totalPage === data.currentPage) {
            $("#load-more").addClass('d-none');
            //alert();
        }
        data.news.forEach(function (item) {
            let text = (item.description.length > 100) ? item.description.substring(0, 100) + '...' : item.description;
            let fulltext = item.description;
            let card = $('<div class="card mb-2" >' +
            '<div class="card-body">' +
                '<div class="card-title"><a href="#" data-toggle="modal" data-target="#fullnews' + item.source.id + '"><h3 class="fw-light">' + item.title + '</h3></a></div>' +
                '<div class="card-author"><small>Author: ' + item.author + '</small></div>' +
                '<div class="card-text">' + text + '' +
                '</div>' +
                '</div>' +
                '<div class="modal fade" id="fullnews' + item.source.id + '" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">' +
                  '<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">' +
                    '<div class="modal-content">' +
                      '<div class="modal-header">' +
                        '<h5 class="modal-title titleNews">' + item.title + '</h5>' +
                        '<button type="button" class="close" data-dismiss="modal" aria-label="Close">' +
                          '<span aria-hidden="true">&times;</span>' +
                        '</button>' +
                      '</div>' +
                      '<div class="modal-body">' + fulltext + '</div>' +
                      '<div class="modal-footer"><small>Author: ' + item.author + '</small></div>' +
                    '</div>' +
                  '</div>' +
                '</div>' +
                '</div>'
              );

            $("#news-container").append(card);
        });
    }

    $(document).ready(
        function () {
          $("#load-more").on('click', function () {
            var nextPage = data.currentPage ++;
              if(nextPage < data.totalPage) {
                  loadNews(data);
              }
          });

            loadNews(data);
            $("#load-more").on('click', function () {
              var nextPage = data.currentPage + 1;
              //console.log(data.currentPage);
                if(nextPage < data.totalPage) {
                    loadNews(data);
                }
            });
        }
    )

</script>
</body>
</html>
